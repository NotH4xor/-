local UIS = game:GetService("UserInputService")
local ESPObjects = {}
local adornedState = false
local keySequence = { Enum.KeyCode.LeftShift, Enum.KeyCode.G }
local keyIndex = 1

local function manageESP(action)
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("UnionOperation") and part.Name == "State" and part.Material == Enum.Material.Neon then
            if action == "add" then
                local esp = Instance.new("BoxHandleAdornment")
                esp.Adornee = part
                esp.AlwaysOnTop = true
                esp.ZIndex = 0
                esp.Size = Vector3.new(2.5, 6.25, 2.5)
                esp.Transparency = 0.3
                esp.Color = BrickColor.new("Royal purple")
                esp.Parent = workspace
                esp.CFrame = CFrame.new(0, -2.2, 0)
                table.insert(ESPObjects, esp)
            elseif action == "remove" then
                for _, esp in ipairs(ESPObjects) do
                    esp:Destroy()
                end
                ESPObjects = {}
            end
        end
    end
end

local function toggleESP()
    if adornedState then
        manageESP("remove")
    else
        manageESP("add")
    end
    adornedState = not adornedState
end

UIS.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == keySequence[keyIndex] then
        keyIndex = keyIndex + 1
        if keyIndex > #keySequence then
            toggleESP()
            keyIndex = 1
        end
    else
        keyIndex = 1
    end
end)
